var churchservice_js_version="7.x-1.21",masterData=null,allPersons={},groups=null,allFacts=null,allSongs=null,allEvents={},timers=[];
jQuery(document).ready(function(){churchInterface.registerView("ListView",listView);churchInterface.registerView("CalView",calView);churchInterface.registerView("FactView",factView);churchInterface.registerView("ItemView",itemView);churchInterface.registerView("SongView",songView);churchInterface.registerView("MaintainView",maintainView);churchInterface.registerView("SettingsView",settingsView);cdb_loadMasterData(function(){var c=false;if(jQuery("#currentdate").val()!=null){listView.currentDate=jQuery("#currentdate").val().toDateEn();
c=true}churchInterface.setModulename(masterData.modulename);churchInterface.setLastLogId(masterData.lastLogId);churchInterface.activateHistory("ListView");cs_loadEventData(null,function(){if(!c)if($("#externevent_id").val()!=null){churchInterface.getCurrentView().currentDate=allEvents[$("#externevent_id").val()].startdate.toDateEn(false);churchInterface.getCurrentView().filter.searchEntry="#"+$("#externevent_id").val();churchInterface.getCurrentView().renderFilter();churchInterface.getCurrentView().renderCalendar()}else{var d=
new Date;d.addDays(-1);var a=new Date;a.addDays(1E3);var e=false;$.each(allEvents,function(b,f){b=f.startdate.toDateEn(false);if(b>=d&&b<a){a=b;e=true}});if(e)listView.currentDate=a}churchInterface.getCurrentView().renderList();churchInterface.sendMessageToAllViews("allDataLoaded");window.setTimeout(function(){cs_loadPersonDataFromCdb(function(){cs_loadAbsent(function(){cs_loadFiles(function(){})})})},10)},false)},false)});
